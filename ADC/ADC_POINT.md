# 版权信息

© 2024 . 未经许可不得复制、修改或分发。 此文献为 [小風的藏書閣](https://t.me/xfp2333) 所有。

# ADC知识点补充

- ESP32 ADC通道与管脚对照表 ：

- ESP32 - C3 ADC通道与管脚对照表 ：


- ESP32 - S3 ADC通道与管脚对照表 ：


| 管脚名/信号名/GPIO | Sar_Mux | ADC 选择 (Sel)           |
|--------------------|---------|-------------------------|
| GPIO1              | 1       |                         |
| GPIO2              | 2       |                         |
| GPIO3              | 3       |                         |
| GPIO4              | 4       |                         |
| GPIO5              | 5       |                         |
| GPIO6              | 6       | **Sel=0,选择SAR ADC1**  |
| GPIO7              | 7       |                         |
| GPIO8              | 8       |                         |
| GPIO9              | 9       |                         |
| GPIO10             | 10      |                         |
|====================|=========|=========================|
| GPIO11             | 1       |                         |
| GPIO12             | 2       |                         |
| GPIO13             | 3       |                         |
| GPIO14             | 4       |                         |
| GPIO15             | 5       |                         |
| GPIO16             | 6       | **Sel=1,选择 SAR ADC2** |
| GPIO17             | 7       |                         |
| GPIO18             | 8       |                         |
| GPIO19             | 9       |                         |
| GPIO20             | 10      |                         |
- ESP32 - C6 ADC通道与管脚对照表 ：


# 什么是 ULP模式？

**ULP 模式（Ultra Low Power mode，超低功耗模式）是一种使设备在非常低的功耗下运行的模式，通常用于延长电池寿命或在资源受限的环境中使用。ULP 模式在嵌入式系统和物联网设备中尤为重要，因为这些设备往往需要长时间运行且功耗极低。**

在 ESP32 中，ULP 协处理器是一种独立的低功耗处理器，可以在主 CPU 休眠时运行。它能够执行简单的任务，如传感器数据采集和基本的逻辑处理。ADC ULP 模式指的是由 ULP 协处理器控制 ADC 的运行，从而在低功耗下进行模数转换。

具体来说，ULP 模式有以下几种：

1. ADC_ULP_MODE_DISABLE: ADC ULP 模式禁用。这意味着 ADC 不会被 ULP 协处理器控制。
2. ADC_ULP_MODE_FSM: ADC 由 ULP FSM（Finite State Machine，有限状态机）控制。ULP FSM 可以在主 CPU 休眠时定期唤醒并执行一些预定义的任务，包括控制 ADC 进行数据采集。
3. ADC_ULP_MODE_RISCV: ADC 由 ULP RISCV 控制。ULP RISCV 是一个更强大的处理器，可以执行更复杂的任务，包括控制 ADC 进行数据采集和处理。

# 什么是ADC衰减?
ADC 衰减（Attenuation）是调整模拟信号输入电压的设置，用于确保 ADC 能够准确测量不同范围的电压信号。衰减通常涉及将信号电压缩小，以便使其在 ADC 能够处理的输入范围内，从而提高测量的精度和范围。

- 详细解释：
**基本概念：**

1. ADC（模数转换器）：将模拟信号转换为数字信号的设备。每个 ADC 有一个最大输入电压范围，超过这个范围的信号可能会导致测量失真。
衰减：通过减少输入信号的电压幅度，将其调整到 ADC 的输入范围内。这是通过在信号路径中加入一个衰减器来实现的。
衰减的作用：

2. 扩展测量范围：允许 ADC 处理高于其原始输入范围的信号。例如，如果 ADC 的最大输入电压为 3.3V，但信号可能高达 5V，衰减可以将信号幅度缩小到 3.3V 范围内进行测量。
提高测量精度：对低电压信号使用衰减，可以使信号在 ADC 的输入范围内提供更高的分辨率和更精确的测量结果。
防止饱和：防止输入信号超过 ADC 的最大输入范围，从而避免测量饱和和失真。
衰减设置：

3. 常见设置：不同的 ADC 可能有不同的衰减选项。例如，ESP32 的 ADC 提供了 0 dB、2.5 dB、6 dB 和 12 dB 的衰减设置。每个衰减值对应不同的电压范围。
选择合适的衰减值：根据需要测量的信号范围和 ADC 的输入规格选择适当的衰减设置。
4. 示例：

- 无衰减（0 dB）：ADC 直接处理输入信号，适合测量较低电压信号。
- 2.5 dB、6 dB、12 dB：信号电压会按照相应的衰减因子进行缩小，适合处理较高电压信号。
**总结**
ADC 衰减是调整和匹配模拟信号电压范围以适应 ADC 输入的设置，使得 ADC 能够在其规定的范围内进行准确的测量。通过合适的衰减设置，可以避免测量饱和、提高精度，并扩展 ADC 能处理的信号范围。

# 什么是 ADC 转换位宽?

ADC 转换位宽（Resolution）是指 ADC 能够将模拟信号转换为数字值的精度，通常用位数（bits）来表示。位宽越高，ADC 的分辨率就越高，能够更精确地表示输入信号的变化。以下是关于 ADC 转换位宽的详细说明：

### 1. **定义**

- **位宽（Bits）**：ADC 的位宽表示其数字输出的位数。位宽越高，ADC 能够表示的数字值的范围就越大，从而提供更高的测量精度。

- **分辨率（Resolution）**：通常用位宽来衡量，表示每个模拟信号被转换成多少个离散的数字值。例如，12 位 ADC 能够将模拟信号转换为 \(2^{12} = 4096\) 个离散的数字值。

### 2. **计算示例**

对于一个具有 12 位分辨率的 ADC，其转换的数字值范围为 0 到 4095（即 \(2^{12} - 1\)）。如果参考电压 `Vref` 是 3.3V，则每个数字值对应的电压步进（LSB，Least Significant Bit）可以计算为：

\[ \text{步进电压} = \frac{V_{ref}}{2^{\text{位宽}}} \]

例如，对于 12 位 ADC 和 `Vref` 为 3.3V：

\[ \text{步进电压} = \frac{3.3V}{4096} \approx 0.0008V = 0.8mV \]

这意味着每一个数字值的变化对应约 0.8mV 的电压变化。

### 3. **常见位宽**

- **8 位**：转换范围为 0 到 255，适用于精度要求较低的应用。
- **10 位**：转换范围为 0 到 1023，常见于中等精度的应用。
- **12 位**：转换范围为 0 到 4095，广泛应用于高精度要求的应用。
- **16 位及以上**：用于需要极高精度的应用，如高精度测量和信号分析。

### 4. **影响因素**

- **噪声**：较高的位宽可以提高精度，但可能受到系统噪声的影响，需要采取措施减小噪声。
- **采样率**：高位宽 ADC 可能会影响采样率，选择合适的位宽和采样率需要权衡精度和速度。
- **参考电压**：准确的参考电压对于高精度 ADC 测量至关重要，不准确的参考电压会影响转换结果的精度。

### 5. **示例应用**

在测量温度、压力、电压等物理量时，选择合适的 ADC 位宽可以确保测量结果的精度。例如，对于温度传感器，如果需要高精度的温度测量，可能会选择 12 位或更高位宽的 ADC。

### 总结

ADC 转换位宽是决定 ADC 精度的关键因素。位宽越高，ADC 能够更精确地转换模拟信号为数字值，从而提供更高的测量精度。在设计和应用中，需要根据具体的精度要求和系统需求选择合适的位宽。
